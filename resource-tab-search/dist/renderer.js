(()=>{"use strict";var e={494(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=r(600),a=l(r(425)),u=s(r(915)),i="rts-filter",f=['[data-testid="cluster-sidebar"]','[class*="sidebarNav"]','[class*="Sidebar"]'],d='[class*="SidebarItem"]',p='[class*="navItem"]',m='[class*="subMenu"]';function h(){for(const e of f){const t=document.querySelector(e);if(t)return t}return null}function b(e){const t=e.querySelector('[class*="expandIcon"]');if(!t)return!1;let r=t.parentElement;for(;r&&r!==e;){if(r.matches(d))return!1;r=r.parentElement}return!0}function y(e){const t=e.querySelectorAll(m);for(let r=0;r<t.length;r++){let n=t[r].parentElement;for(;n&&n!==e&&!n.matches(d);)n=n.parentElement;if(n===e)return!1}return!0}function v(e){const t=e.querySelectorAll(p);for(let r=0;r<t.length;r++){let n=t[r].parentElement;for(;n&&n!==e&&!n.matches(d);)n=n.parentElement;if(n===e)return void t[r].click()}}function E(e){return Array.from(e.querySelectorAll(d)).filter(t=>{let r=t.parentElement;for(;r&&r!==e;){if(r.matches(d))return!1;r=r.parentElement}return!0})}const g=()=>{const[e,t]=(0,a.useState)(""),r=(0,a.useRef)(new Map),n=(0,a.useRef)(new Set),o=(0,a.useRef)(null),l=(0,a.useCallback)(()=>{const e=Array.from(n.current);for(let t=e.length-1;t>=0;t--)y(e[t])||v(e[t]);n.current.clear()},[]),s=(0,a.useCallback)(()=>{r.current.forEach((e,t)=>{t.style.display=e}),r.current.clear()},[]),c=(0,a.useCallback)(e=>{s(),l();const t=e.toLowerCase().trim();if(!t)return;const r=h();if(!r)return;let o=0;const c=()=>{const e=h();if(!e)return;const r=Array.from(e.querySelectorAll(d));let l=0;r.forEach(e=>{b(e)&&y(e)&&!n.current.has(e)&&(v(e),n.current.add(e),l++)}),o++,l>0&&o<5?setTimeout(c,60):i(t)},a=Array.from(r.querySelectorAll(d));let u=0;a.forEach(e=>{b(e)&&y(e)&&(v(e),n.current.add(e),u++)}),u>0?setTimeout(c,60):i(t)},[s,l]),u=(0,a.useCallback)((e,t)=>{const n=function(e){const t=e.querySelectorAll(p);for(let r=0;r<t.length;r++){let n=t[r].parentElement;for(;n&&n!==e&&!n.matches(d);)n=n.parentElement;if(n===e)return(t[r].textContent||"").toLowerCase()}return(e.textContent||"").toLowerCase()}(e),o=n.includes(t),l=e.querySelectorAll(m);let s=null;for(let t=0;t<l.length;t++){let r=l[t].parentElement;for(;r&&r!==e&&!r.matches(d);)r=r.parentElement;if(r===e){s=l[t];break}}if(s){const e=E(s);let n=!1;return e.forEach(e=>{if(u(e,t))n=!0;else if(!o){const t=e;r.current.set(e,t.style.display||""),t.style.display="none"}}),o?(e.forEach(e=>{r.current.has(e)&&(e.style.display=r.current.get(e)||"",r.current.delete(e))}),!0):n}return o},[]),i=(0,a.useCallback)(e=>{const t=h();t&&(E(t).forEach(t=>{if(!u(t,e)){const e=t;r.current.set(t,e.style.display||""),e.style.display="none"}}),n.current.forEach(e=>{const t=e;(r.current.has(e)||null===t.offsetParent)&&!y(e)&&(v(e),n.current.delete(e))}))},[u]);return(0,a.useEffect)(()=>(o.current&&clearTimeout(o.current),o.current=setTimeout(()=>c(e),250),()=>{o.current&&clearTimeout(o.current)}),[e,c]),(0,a.useEffect)(()=>()=>{s(),l()},[s,l]),a.default.createElement("div",{style:{display:"flex",alignItems:"center",background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:4,padding:"8px 12px"}},a.default.createElement("input",{type:"text",placeholder:"Filter sidebar...",value:e,onChange:e=>t(e.target.value),style:{flex:1,background:"transparent",border:"none",outline:"none",color:"#fff",fontSize:13}}),e&&a.default.createElement("span",{onClick:()=>t(""),style:{cursor:"pointer",color:"rgba(255,255,255,0.5)",marginLeft:8}},"âœ•"))};class x extends c.Renderer.LensExtension{constructor(){super(...arguments),this.container=null,this.observer=null}onActivate(){this.tryInject(),this.observer=new MutationObserver(()=>{document.getElementById(i)||this.tryInject()}),this.observer.observe(document.body,{childList:!0,subtree:!0})}onDeactivate(){this.observer&&(this.observer.disconnect(),this.observer=null),this.container&&(u.default.unmountComponentAtNode(this.container),this.container.remove(),this.container=null)}tryInject(){if(document.getElementById(i))return!0;let e=null;for(const t of f)if(e=document.querySelector(t),e)break;return!!e&&(this.container=document.createElement("div"),this.container.id=i,this.container.style.cssText="padding:10px 16px;position:sticky;top:0;z-index:100;border-bottom:1px solid rgba(255,255,255,0.07)",e.insertBefore(this.container,e.firstChild),u.default.render(a.default.createElement(g,null),this.container),console.log("[RTS] Sidebar filter injected"),!0)}}t.default=x},600(e){e.exports=global.LensExtensions},425(e){e.exports=global.React},915(e){e.exports=global.ReactDOM}},t={},r=function r(n){var o=t[n];if(void 0!==o)return o.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,r),l.exports}(494);module.exports=r})();